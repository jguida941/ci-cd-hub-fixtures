# Caller workflow to test reusable Java CI from hub
name: "Hub: Java CI (Reusable)"

on:
  workflow_dispatch:
  push:
    branches: [main, test-phase1b-schema]
    paths:
      - 'java-*/**'
  pull_request:
    branches: [main]
    paths:
      - 'java-*/**'

permissions:
  contents: read
  security-events: write

jobs:
  ci-passing:
    name: "Java Passing"
    uses: jguida941/ci-cd-hub/.github/workflows/java-ci.yml@phase1b-workflow-schema
    with:
      java_version: '21'
      build_tool: 'maven'
      run_jacoco: true
      run_checkstyle: true
      run_spotbugs: true
      run_owasp: true
      run_pitest: true
      run_pmd: true
      run_semgrep: true
      run_trivy: true
      run_docker: true
      run_codeql: true
      coverage_min: 70
      workdir: 'java-passing'
    secrets: inherit

  ci-failing:
    name: "Java Failing"
    uses: jguida941/ci-cd-hub/.github/workflows/java-ci.yml@phase1b-workflow-schema
    with:
      java_version: '21'
      build_tool: 'maven'
      run_jacoco: true
      run_checkstyle: true
      run_spotbugs: true
      run_owasp: true
      run_pitest: true
      run_pmd: true
      run_semgrep: true
      run_trivy: true
      run_docker: true
      run_codeql: true
      coverage_min: 70
      workdir: 'java-failing'
    secrets: inherit
